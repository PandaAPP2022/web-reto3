<input type="file" name="fileToUpload" id="fileToUpload">
<button onclick="subir()">Guardar</button>

<input type="number" value=0 id="num">

<img id="image" src="" alt="">

<script src="assets/js/jquery.min.js"></script>

<script>
subir = () => {
  const num = document.getElementById('num').value + '_'

  const file_data = $('#fileToUpload').prop('files')[0];
  const form_data = new FormData();
  form_data.append('fileToUpload', file_data);
  form_data.append('questionId', num);

  $.ajax({
      url: 'assets/php/upload.php', dataType: 'text', cache: false, contentType: false, processData: false,
      data: form_data, type: 'post',
      success: function(response){
        console.log(response);
        const jsonData = JSON.parse(response);
        console.log(jsonData);
        if ('name' in jsonData) document.getElementById('image').src = 'assets/images/'+jsonData.name
        else console.log(jsonData);
      },
      error: (response) => console.log(response)
  });
}
</script>
